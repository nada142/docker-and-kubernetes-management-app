version: '3.8'  

services:  
  app:  
    image: node:18  
    container_name: my-node-app  
    working_dir: /app  
    volumes:  
      - .:/app  
    ports:  
      - "3000:3000"  
    command: "node server.js"  
    environment:  
      - NODE_ENV=development  
    depends_on:  
      - db  

  db:  
    image: postgres:15  
    container_name: my-postgres-db  
    restart: always  
    environment:  
      POSTGRES_USER: user  
      POSTGRES_PASSWORD: password  
      POSTGRES_DB: mydatabase  
    ports:  
      - "5432:5432"  
    volumes:  
      - db-data:/var/lib/postgresql/data  

volumes:  
  db-data:  